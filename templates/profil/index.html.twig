{% extends 'base.html.twig' %}

{% block title %}Hello my publication controller{% endblock %}

{% block body %}
    <div class="container px-4 py-5" id="custom-cards">
        <h2 class="pb-2 border-bottom d-flex">
          <img src="{{users.Imagepath}}" alt="" style="height: 50px;width:50px; border-radius:25px;border:solid 2px black;object-fit:cover"> 
          <span style="margin-top:1px; margin-left:5px;">{{app.user.username}} </span>
          <a href="{{ path('app_mymotivatorlist') }}" title="listes des motivateurs" class="btn btn-secondary" style="margin-top:1px; margin-left:5px;">
            <strong style="font-size: 12px;">
              entrain de suivre {{ followingcount | length }}
              {% if followingcount | length >1 %}
                motivateurs 
                {% else %}
                  motivateur
              {% endif %}
            </strong> </a>   
        </h2>
        <h6>"Je suis <em><u>{{ app.user.username}}</u></em>  pour le moment je suis dans le <u><em>{{app.user.religion}}</em></u> peut etre plus tard je changerai la religion"</h6>
        <p class="btn btn-bd-primary" title="abonnement">aucun n'abonnement</p>

        {% if userdemandes | length > 0 %}
          <div class="my-3 p-3 alert alert-warning rounded shadow-sm">
            <h6 class="border-bottom pb-2 mb-0">Mes demandes pour devenir un Motivateur</h6>  
            {% for userdemande in userdemandes %}
            <div class="d-flex text-body-secondary pt-3">
              <svg class="bd-placeholder-img flex-shrink-0 me-2 rounded" width="32" height="32" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: 32x32" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="#007bff"/><text x="50%" y="50%" fill="#007bff" dy=".3em">32x32</text></svg>
              <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
                <div class="d-flex justify-content-between">
                  <strong class="text-gray-dark">Nature:devenir un motivateur</strong>
                </div>
                <span class="d-block">fait il y'a: {{ userdemande.date | ago }}</span>
                <strong>Numero de suivi: {{ userdemande.demandenumbe }} </strong>
              </div>
  
              <div class="pb-3 mb-0 small lh-sm border-bottom w-100">
                <div class="d-flex justify-content-between">
                  <strong class="text-gray-dark">status:
                    {% if userdemande.decision =='traitement encours...' %}
                      <small class="btn-secondary p-2" style="font-size: 14px;">
                         Traitement encours...
                      </small>
                      {% elseif userdemande.decision == 'acceptée' %}
                        <small class="btn btn-bd-primary text-light p-2" style="font-size: 14px;">
                         Demande acceptée
                      </small>
                      {% else %}
                        <small class="btn btn-danger text-light p-2" style="font-size: 14px;">
                         Demande refusée
                      </small>
                    {% endif %} 
                   </strong>
                  <a href="{{ path('app_delete_demande',{id:userdemande.id}) }}" class="btn btn-danger">effacer</a>
                </div>
              </div>
            </div>
            <small style="font-size: 16px;">NOTE: {{ userdemande.motif }}</small>
            {% endfor %}                  
           
            <small class="d-block text-end mt-3">
              <a href="#">All suggestions</a>
            </small>
          </div>

        {% endif %}
       

        <div class="row row-cols-1 row-cols-lg-3 align-items-stretch g-4 py-5">
           {# mes publication detail #}
          <div class="col md-3">
            <a href="{{ path('app_mypublication') }}" style="text-decoration: none;">
              <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg">
                <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">                  
                      <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold text-center">
                         Mes Archives   
                      </h3>                    
                </div>
              </div>
            </a>          
          </div>
           {# end publication  #}

           {# all my postes #}
           {% if validedemandes %}
            <div class="col md-3">
              <a href="{{ path('app_mypostes') }}" style="text-decoration: none;">
                <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg">
                  <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">                  
                        <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold text-center">
                           Mes Postes   
                        </h3>                    
                  </div>
                </div>
              </a>          
            </div>
           {% endif %}
           
           {# end postes #}

            {# mes info detail #}
          <div class="col md-3">
            <a href=" {{ path('app_mesinfos') }}" style="text-decoration: none;">
              <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg">
                <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">
                 
                      <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold text-center">
                            Mes informations personnelles
                      </h3>
                                  
                </div>
              </div>
            </a>            
          </div>
           {# end info  #}
            {# mes abonnements #}
          <div class="col md-3">
            <a href="{{ path('app_abonnement') }}" style="text-decoration: none;">
              <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg">
                <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">                 
                      <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold text-center">
                          Mes Abonnements  
                      </h3>                 
                </div>
              </div>
            </a>
            
          </div>

          <div class="col md-3">
            <a href="{{ path('app_commandes') }}" style="text-decoration: none;">
              <div class="card card-cover h-100 overflow-hidden text-bg-dark rounded-4 shadow-lg">
                <div class="d-flex flex-column h-100 p-5 pb-3 text-white text-shadow-1">                 
                      <h3 class="pt-5 mt-5 mb-4 display-6 lh-1 fw-bold text-center">
                          Mes Commandes  
                      </h3>                 
                </div>
              </div>
            </a>
            
          </div>
           {# end abonnement  #}
        </div>
      </div>
      {{ include('blog/footer.html.twig')}}
{% endblock %}
{% block javascripts %} 
	 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	 <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	 <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js"></script>
	<!-- Bootstrap core JavaScript -->
{% endblock %}



