{% extends 'base.html.twig' %}

{% block title %}New contact{% endblock %}

{% block body %}
<main class="form-signin w-100 m-auto">
    <h3 class="mb-3 fw-light">Contact us <strong>{{ app.user.username }}</strong></h3>
    <strong class="errorhere text-danger"></strong>
    <strong class="successmessage text-success"></strong>
 {{ form_start(newform,{
    attr: { 
        'novalidate': 'novalidate',
        'class': 'contactform', 
        } 
    }) }}
    <small style="font-size:10px;">La raison</small>
    <div class="form-floating">
      {{ form_widget(newform.purpose) }}
      <label for="floatingInput">choisir votre raison</label>
    </div>
    <small style="font-size:10px;">dites nous votre soucis</small>
    <div class="form-floating mb-3">
        {{ form_widget(newform.description) }}
        <label for="floatingInput">decrire votre soucis</label>
    </div>
    <small style="font-size:10px;">le numero de votre demande</small>
    <div class="form-floating mb-3">
        {{ form_widget(newform.suivinumber) }}
        <label for="floatingInput">le numero de votre demande</label>
    </div>
    
    <button  class="btn btn-primary w-100 py-2" type="submit">contac Us</button>
    {{ form_end(newform) }}
</main>
{% endblock %}
{% block javascripts %} 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js"></script>
   <!-- Bootstrap core JavaScript -->
    
   <script> 
    // here to contact us team motivate me
    $(document).ready(function(){
       $('.contactform').on('submit',function(event){
           event.preventDefault();

             $.ajax({
                 url: $(this).attr('action'),
				 type: 'POST',
				 data: $(this).serialize(),
                 
                 success: function (response) {
                    
					 $('.successmessage').html(response.message);
                     $('.contactform')[0].reset();
                     setTimeout(function(){ $('.successmessage').html(''); }, 6000);
                 },
                 error: function (xhr) {
                    let errorMessage = xhr.responseJSON.errors;
					 $('.errorhere').html(errorMessage);
                 }
             });
         
        })
        })
   </script>
{% endblock %}

