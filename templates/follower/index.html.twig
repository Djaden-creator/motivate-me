{% extends 'base.html.twig' %}

{% block title %}Hello FollowerController!
{% endblock %}

{% block body %}
	<div class="container">
		<div class="row">
			<form action="bg dark col md-3">
				<div class="mb-3">
					<input type="text" class="form-control-lg" id="search-box" placeholder="search your motivator here">
				</div>
			</form>
		</div>
    {# here the div of result ajax  #}
    <div class="row row-cols-1 search-results">
		</div>
    {# end here the div of result ajax  #}
    <h5 class="mt-3">Mes meilleurs motivateurs</h5>
		<div class="row row-cols-1 row-cols-lg-3 ">
			{% for followingcount in followingcounts %}
				{# here the template of result #}
				{{include ("follower/resultuser.html.twig")}}
				{# end  #}
			{% endfor %}
		</div>
	</div>
{% endblock %}
{% block javascripts %} 
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.7/axios.min.js"></script>

  <script> 
   $(document).ready(function(){

   //here we do the seach of user
    $('#search-box').on('keyup', function () {
      let query = $(this).val();
      
      if (query.length > 2) { // Only search if at least 3 characters
          $.ajax({
              url: '{{ path("search") }}',
              method: 'GET',
              data: { query: query },
              success: function (data) {
                  $('.search-results').html(data);                
              }
          });
      }
      else{
        $('.search-results').html('<h3 class="text-danger" style="font-size: 15px;margin-left:0px;">sorry the user you are tryin to search for he is not a motivator</h3>');      
      } 
    });
   
        
   }) 
  </script>
 <!-- Bootstrap core JavaScript -->
{% endblock %}
